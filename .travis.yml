os: linux
language: python
python: "2.7"
matrix:
  include:
    - os: osx
      osx_image: xcode8.3
      language: generic
before_install:
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then bash scripts/setup-osx.sh; source venv/bin/activate; fi
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then sudo apt-get update -qq && sudo apt-get install -qq python-qt4 libdiscid0 libdiscid0-dev; $MUTAGEN; $DISCID; fi
install:
  # Set up Picard
  - python setup.py build_ext -i
  - python setup.py build_locales -i
# Run the tests!
script: "python setup.py test"

# Tell people that tests were run
notifications:
  irc: "chat.freenode.net#metabrainz"